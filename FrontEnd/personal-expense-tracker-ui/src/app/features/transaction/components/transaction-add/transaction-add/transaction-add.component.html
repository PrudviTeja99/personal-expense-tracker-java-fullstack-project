<div class="m-4 d-flex flex-column h-100">
    <div class="align-self-end">
        <i class="bi bi-x-lg" role="button" (click)="onCancel()"></i>
    </div>
    <div class="d-flex fw-bold fs-1 flex-grow-1 align-items-center justify-content-center">
        Add Transaction
    </div>
    <form class="d-flex flex-column my-4" [formGroup]="transactionGroup" (ngSubmit)="createTransaction()">
        
        <mat-form-field>
            <mat-label>
                Type of Transaction
            </mat-label>
            <!-- <input matInput formControlName="category">
              -->
            <mat-select formControlName="type">
                <mat-option value="EXPENSE">EXPENSE</mat-option>
                <mat-option value="INCOME">INCOME</mat-option>
            </mat-select>

            @if(transactionGroup.controls['type'].touched && transactionGroup.controls['type'].invalid){
                <mat-error>Invalid transacation type !!</mat-error>
            }
            @if(transactionGroup.controls['type'].errors){
                <mat-error>Trasaction type is required !!</mat-error>
            }
        </mat-form-field>
  
        <mat-form-field>
            <mat-label>
                Category
            </mat-label>
            <input matInput formControlName="category">

            @if(transactionGroup.controls['category'].touched && transactionGroup.controls['category'].invalid){
                <mat-error>Invalid category !!</mat-error>
            }
            @if(transactionGroup.controls['category'].errors){
                <mat-error>Category is required !!</mat-error>
            }
        </mat-form-field>

        <mat-form-field>
            <mat-label>Amount</mat-label>
            <input matInput type="number" formControlName="amount">
            @if(transactionGroup.controls['amount'].touched && transactionGroup.controls['amount'].invalid){
                <mat-error>Invalid amount !!</mat-error>
            }
            @if(transactionGroup.controls['amount']){
                <mat-error>Amount is required !!</mat-error>
            }
        </mat-form-field>

        <mat-form-field>
            <mat-label>Choose a date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            @if(transactionGroup.controls['date'].dirty && !transactionGroup.controls['date'].valid){
                <mat-error>Invalid date</mat-error>
            }
            @if(transactionGroup.controls['date'].errors){
                <mat-error>Date is required !!</mat-error>
            }
        </mat-form-field>
          
        <mat-form-field>
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description"></textarea>
        </mat-form-field>
        
        <div class="align-self-end mt-4">
            <div><button class="btn btn-primary" type="submit">Create</button></div>
        </div>
    </form>
</div>